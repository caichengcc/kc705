<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>logiCVC driver: logiCVC demo details</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logiCVC.gif"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">logiCVC driver
   &#160;<span id="projectnumber">3_04_a</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('p3.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">logiCVC demo details </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>logiCVC demo is a short application utilizing and thus demonstrating functionality of most features available in logiCVC IP core. It also represents a piece of software that can be used as a guide on how should those features be used and what might be worth additional consideration.</p>
<p>The following features are demostrated:</p>
<ul>
<li>Supports up to 5 layers, last configurable as background color</li>
<li>Configurable layer size and position</li>
<li>Color keyed transparency</li>
<li>Pixel, Layer or Color lookup table alpha blending mode</li>
<li>Packed pixel layer memory organization: pixel color depth 8bpp (using Color lookup table), 16bpp (Hicolor RGB 5-6-5) and 24bpp (Truecolor)</li>
<li>HW cursor</li>
<li>Double buffering that enables flicker-free reproduction <br/>
<br/>
</li>
</ul>
<ul>
<li><b><a class="el" href="logi_c_v_c__main_8c.html">logiCVC_main.c</a> file</b></li>
</ul>
<p>This file contains the <a class="el" href="group__logi_c_v_cdemo.html#ga840291bc02cba5474a4cb46a9b9566fe">main()</a> function for this application. The reason why this function is placed in its own file is the idea to se efate platform pre efation logic from the demo itself. This way logiCVC_demo files do not contain any platform-related code and could be reused in different enviroment.</p>
<p>Function <a class="el" href="group__logi_c_v_cdemo.html#ga840291bc02cba5474a4cb46a9b9566fe">main()</a> only initializes platform IIC bus and PLL circuit and calls <a class="el" href="group__logi_c_v_cdemo.html#ga5ea5b657e095ed4cf9b5ec7ea7c9f1dc">logiCVCDemo()</a>. <br/>
<br/>
</p>
<ul>
<li><b><a class="el" href="group__logi_c_v_cdemo.html#ga5ea5b657e095ed4cf9b5ec7ea7c9f1dc">logiCVCDemo()</a> function</b></li>
</ul>
<p>This function first initializes all available logiCVC instances in the system (number of instances is obtained from X ef_LOGICVC_NUM_INSTANCES macro defined in xparameters.h, which should reflect current setup choices made in the Xilinx design). In addition, if any layer is defined as 8-bit, it's Color lookup table (CLUT) is filled with such color values as if regular RGB_332 color configuration is used. This is done because on logiCVC init the CLUT is filled with zeros by default (all would be black).</p>
<p>After that, for each available instance a number of demo functions is called, one by one. Most demo functions are called once per each logiCVC layer, except few functions that appear to be more attractive working on all layers at once.</p>
<p>If a background layer is defined, then it is only used to display a specific color and none of the demo functions can be applied to it, so it is skipped. Also, trans efency and blending demos, if applied over the bottom layer, might create unexpected results because there is nothing to display "below the bottom
layer", so they are also skipped for the last layer. <br/>
<br/>
</p>
<ul>
<li><b><a class="el" href="group__logi_c_v_cdemo.html#ga03e61f7415f4f2e3e88dac93783bf8d6">colorScaleOnLayer()</a> function</b></li>
</ul>
<p>This function draws a color scale from left to right side of display. Each layer gets a different color and displays it ranging from black to full color intensity. Layers use following colors:</p>
<ul>
<li>top layer: green</li>
<li>2nd layer: red</li>
<li>3rd layer: blue</li>
<li>4th layer: yellow</li>
<li>5th layer: purple<br/>
</li>
</ul>
<p>In addition, each layer gets several horizontal lines in full color intensity. This is to be able to see layer moving in some of the following demos. At last, each layer get a number of short white vertical lines - number of lines equals to layer position, so first layer will have one line, 2nd layer will have 2 lines etc. They might seem as Roman numbers marking each layer, at least for first 3 layers.</p>
<p>To avoid layer patterns being too much alike, each layer has different scale steps (i.e. different width of scale color bars) different positions and thinckness of horizontal lines and also different thickness of short vertical lines. <br/>
<br/>
</p>
<ul>
<li><b><a class="el" href="group__logi_c_v_cdemo.html#ga201c8fde88dd04b97ab6b9a00c9c2e10">shrinkLayers()</a> function</b></li>
</ul>
<p>This function changes the position and size of each layer. It starts from top layer cropping it from full screen size to 1/5 of each screen dimension and placing it in centered next to the left edge of the screen. This is done in continuous steps from one position to another. Then the same is done with second layer, except it ends up a little bigger com efed to top layer, and placed centered next to the top screen edge. If other layers are defined, they would be handled the same, each ending a bit bigger and in top left corner and in top right corner of the screen, respectively.</p>
<p>Last layer is not shrinked, as there would be nothing to display in the remaining eft of the screen. Of course, this is not a limitation in general, because other efts of screen may be covered by non-trans efent top layers, but that was not convenient for this demo. <br/>
<br/>
</p>
<ul>
<li><b><a class="el" href="group__logi_c_v_cdemo.html#ga426e9e480844988b4425213721b9a7bc">setLayerTransparentColor()</a> function</b></li>
</ul>
<p>This function demonstrates setting different trans efent colors for layers. In continuous steps, pixels from top row are read and a trans efent color is chosen to match those pixels. This is done in continuous steps from left to right edge of each layer. As all layers now contain vertical color scale bars, setting trans efent color makes entire vertical bar invisible, allowing layer below to be visible through the hole. At the end of loop, trans efent color is set to match the pixel at position (40,0). <br/>
<br/>
</p>
<ul>
<li><b><a class="el" href="group__logi_c_v_cdemo.html#ga4e5d97dc9395800d00e29249350efd45">moveLayers()</a> function</b></li>
</ul>
<p>This function moves all layers concurrently in continuous steps from their current positions to the center of display. As the top layer is the smallest and each next layer is bigger, they will all be visible on top of each other at the end position. Continuous move also demonstrates how they smoothly interact when being moved over each other. <br/>
<br/>
</p>
<ul>
<li><b><a class="el" href="group__logi_c_v_cdemo.html#gacede465700751f3a008144d4b0dc566f">blendDownLayer()</a> and <a class="el" href="group__logi_c_v_cdemo.html#ga1e5b3b642c3bd33261757dff69d3d45b">blendDownLayerStep()</a> functions</b></li>
</ul>
<p>This function blends down each layer in continuous steps from full opacity to full trans efency depending on current layer blending abilities.</p>
<ul>
<li>Layers with layer alpha ability are blend down setting layer alpha value</li>
<li>Layers with CLUT are blend down setting alpha section of all colors in Color lookup table</li>
<li>Layers with pixel alpha ability are only blend down for top left 50x50 pixel area, for sake of performance <br/>
<br/>
</li>
</ul>
<ul>
<li><b><a class="el" href="group__logi_c_v_cdemo.html#ga72440d80cbe5a391b69197718913fb4b">changeMemoryOffset()</a> function</b></li>
</ul>
<p>This function sets different memory offset for each layer. Offset is defined in pixels, so that new offset set defines the coordinates of the pixel that will appear at the top left corner of the layer. The function moves the offset in contiuous steps from (0,0) to (50,100), then to (100,100), then to (100,50) and finally back to (0,0). Content of each layer moves around and then returns back to the starting position.</p>
<p>Note: Moving offset of the last layer may produce unpredicted content next to the bottom and right edge of the screen since it is displaying the area that might not be properly initialized for the show. <br/>
<br/>
</p>
<ul>
<li><b><a class="el" href="group__logi_c_v_cdemo.html#ga45a8194cc70c59a0a6abb4f2747548bb">cursorDemo()</a> function</b></li>
</ul>
<p>This function uses the top layer to demonstrate how a simple mouse cursor could be displayed. Small arrow image with trans efent background is drawn in the top left corner of first layer, and the layer size is reduced to 16x16 area. This cursor is then moved around following a rectangular path around the center of screen simply by changing position of the top layer. <br/>
<br/>
</p>
<ul>
<li><b><a class="el" href="group__logi_c_v_cdemo.html#ga68517cf72cc45e0b2a0356ac96590c1f">bufferingDemo()</a> function</b></li>
</ul>
<p>This function demonstrates how repainting the screen can be made flicker-free when using double buffering. In first pass, the function redraws entire screen and then draws small grey rectangle in a continuous loop moving this rectangle from top left corner to the bottom edge of the screen. In second pass, the same thing is done using double buffering. It should be visible that in second pass the image appearing on screen does not flicker.</p>
<ul>
<li><b><a class="el" href="group__logi_c_v_cdemo.html#gaca9a0d297d3eb4b378fb49a054ffa6c4">getRawColor()</a> function</b></li>
</ul>
<p>This is only a helper function for obtaining the raw color value that should be applied to a certain layer. Most color-related driver functions accept raw color values only, therefore application can manipulate with true colors, but once the color needs to be provided to the driver function, this function is called for conversion. </p>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">index</a>      </li>

    <li class="footer">Generated on Thu Oct 11 2012 16:01:09 for logiCVC driver by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
